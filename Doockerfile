# Gunakan PHP 8.2 + ekstensi lengkap
FROM richarvey/nginx-php-fpm:2.0.2

# Install ekstensi PHP tambahan untuk Laravel & Excel
RUN apk add --no-cache \
    php82-xml \
    php82-xmlwriter \
    php82-zip \
    php82-gd \
    php82-curl \
    php82-mbstring \
    php82-intl \
    php82-fileinfo \
    php82-tokenizer \
    php82-ctype

# Set working directory
WORKDIR /var/www/html

# Copy semua file project
COPY . .

# Install Composer
RUN curl -sS https://getcomposer.org/installer | php \
    && php composer.phar install --no-dev --optimize-autoloader

# Public folder
ENV DOCUMENT_ROOT=/var/www/html/public

EXPOSE 80
